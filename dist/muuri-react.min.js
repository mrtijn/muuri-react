/**
* Muuri-react v3.1.5
* https://paol-imi.github.io/muuri-react
* Copyright (c) 2020-present, Paol-imi
* Released under the MIT license
* https://github.com/Paol-imi/muuri-react/blob/master/LICENSE
* @license MIT
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("muuri"),require("react")):"function"==typeof define&&define.amd?define(["exports","muuri","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).MuuriReact={},e.Muuri,e.React)}(this,(function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=r(t),i=r(n);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u="_component";function s(e){return!!e[u]}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e,t){s(e)?Object.assign(e[u],t):e[u]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)}function f(e){return e[u]}function d(e){e._component=null}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){return e(t={exports:{}},t.exports),t.exports
/** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   */}o.default.prototype.getId=function(){return f(this).id},o.default.prototype.getGroupIds=function(){return f(this).groupIds},o.default.prototype.getSizerElement=function(){return f(this).sizerElement},o.default.Item.prototype.getKey=function(){return f(this).key},o.default.Item.prototype.getProps=function(){return f(this).props},o.default.Item.prototype.getData=function(){return f(this).data},o.default.Item.prototype.setData=function(e){f(this).data=e};var m="function"==typeof Symbol&&Symbol.for,h=m?Symbol.for("react.element"):60103,v=m?Symbol.for("react.portal"):60106,b=m?Symbol.for("react.fragment"):60107,C=m?Symbol.for("react.strict_mode"):60108,O=m?Symbol.for("react.profiler"):60114,_=m?Symbol.for("react.provider"):60109,S=m?Symbol.for("react.context"):60110,w=m?Symbol.for("react.async_mode"):60111,R=m?Symbol.for("react.concurrent_mode"):60111,T=m?Symbol.for("react.forward_ref"):60112,P=m?Symbol.for("react.suspense"):60113,E=m?Symbol.for("react.suspense_list"):60120,I=m?Symbol.for("react.memo"):60115,j=m?Symbol.for("react.lazy"):60116,x=m?Symbol.for("react.block"):60121,D=m?Symbol.for("react.fundamental"):60117,k=m?Symbol.for("react.responder"):60118,M=m?Symbol.for("react.scope"):60119;function A(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case h:switch(e=e.type){case w:case R:case b:case O:case C:case P:return e;default:switch(e=e&&e.$$typeof){case S:case T:case j:case I:case _:return e;default:return t}}case v:return t}}}function F(e){return A(e)===R}var G={AsyncMode:w,ConcurrentMode:R,ContextConsumer:S,ContextProvider:_,Element:h,ForwardRef:T,Fragment:b,Lazy:j,Memo:I,Portal:v,Profiler:O,StrictMode:C,Suspense:P,isAsyncMode:function(e){return F(e)||A(e)===w},isConcurrentMode:F,isContextConsumer:function(e){return A(e)===S},isContextProvider:function(e){return A(e)===_},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===h},isForwardRef:function(e){return A(e)===T},isFragment:function(e){return A(e)===b},isLazy:function(e){return A(e)===j},isMemo:function(e){return A(e)===I},isPortal:function(e){return A(e)===v},isProfiler:function(e){return A(e)===O},isStrictMode:function(e){return A(e)===C},isSuspense:function(e){return A(e)===P},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===b||e===R||e===O||e===C||e===P||e===E||"object"==typeof e&&null!==e&&(e.$$typeof===j||e.$$typeof===I||e.$$typeof===_||e.$$typeof===S||e.$$typeof===T||e.$$typeof===D||e.$$typeof===k||e.$$typeof===M||e.$$typeof===x)},typeOf:A},H=g((function(e,t){}));H.AsyncMode,H.ConcurrentMode,H.ContextConsumer,H.ContextProvider,H.Element,H.ForwardRef,H.Fragment,H.Lazy,H.Memo,H.Portal,H.Profiler,H.StrictMode,H.Suspense,H.isAsyncMode,H.isConcurrentMode,H.isContextConsumer,H.isContextProvider,H.isElement,H.isForwardRef,H.isFragment,H.isLazy,H.isMemo,H.isPortal,H.isProfiler,H.isStrictMode,H.isSuspense,H.isValidElementType,H.typeOf,g((function(e){e.exports=G}));
/*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  */
Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;!function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()||Object.assign;function $(){}function q(){}Function.call.bind(Object.prototype.hasOwnProperty),q.resetWarningCache=$;var L=g((function(e){e.exports=function(){function e(e,t,n,r,o,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:q,resetWarningCache:$};return n.PropTypes=n,n}()})),z=n.createContext({}),N=z.Provider,V=function(){return n.useContext(z)};z.displayName="GridProvider";var U=n.createContext({}),B=U.Provider,W=function(){return n.useContext(U)};function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,n){return t&&Y(e.prototype,t),n&&Y(e,n),e}U.displayName="ItemProvider";var J=function(){function e(){K(this,e),a(this,"_eventsMap",new Map),a(this,"_payloadsMap",new Map)}return Z(e,[{key:"enableEvent",value:function(e,t){this._eventsMap.set(e,t)}},{key:"emitEvent",value:function(e,t){this.isEnabled(e)&&(this._payloadsMap.set(e,t),this._eventsMap.get(e)())}},{key:"getPayload",value:function(e){return this._payloadsMap.get(e)}},{key:"isEnabled",value:function(e){return this._eventsMap.has(e)}},{key:"destroy",value:function(){this._eventsMap.clear(),this._payloadsMap.clear()}}]),e}(),Q=function(){function e(){K(this,e),a(this,"_requests",[])}return Z(e,[{key:"useInit",value:function(){this._requests=[]}},{key:"emit",value:function(e){for(var t=0;t<this._requests.length;t++)this._requests[t](e[t])}},{key:"requestItem",value:function(e){this._requests.push(e)}},{key:"destroy",value:function(){this._requests=[]}}]),e}();function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ee=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(g((function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0})));function te(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function oe(e,t,n){return(oe=re()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&X(o,n.prototype),o}).apply(null,arguments)}function ie(e){var t="function"==typeof Map?new Map:void 0;return(ie=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return oe(e,arguments,ne(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),X(r,e)})(e)}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ne(e);if(t){var o=ne(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return te(this,n)}}var ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(n,e);var t=ae(n);function n(e){var r;return K(this,n),(r=t.call(this,e)).name="Invariant",r}return n}(ie(Error));function se(e,t){if(!e)throw new ue("Invariant failed")}var le=function(){function e(){K(this,e),a(this,"_item",null),a(this,"_instance",{})}return Z(e,[{key:"set",value:function(e,t){this._item?c(this._item,a({},e,t)):this._instance[e]=t}},{key:"get",value:function(e){return this._item?f(this._item)[e]:this._instance[e]}},{key:"delete",value:function(){this._item&&d(this._item)}},{key:"setItem",value:function(e){this._item=e,c(this._item,this._instance),this._instance={}}},{key:"getItem",value:function(){return se(null!==this._item),this._item}},{key:"hasItem",value:function(){return null!==this._item}},{key:"destroy",value:function(){this._item=null,this._instance={}}}]),e}(),ce=function(){function e(){K(this,e),a(this,"_itemsToRemove",[])}return Z(e,[{key:"useInit",value:function(){this._itemsToRemove=[]}},{key:"removeItem",value:function(e){this._itemsToRemove.push(e)}},{key:"getItemsToRemove",value:function(){return this._itemsToRemove}},{key:"destroy",value:function(){this._itemsToRemove=[]}}]),e}(),fe=function(){function e(){K(this,e),a(this,"_itemsToRefresh",void 0),a(this,"_itemsToShow",void 0),a(this,"_itemsToHide",void 0),a(this,"_isRendering",void 0),this._itemsToRefresh=[],this._itemsToShow=[],this._itemsToHide=[],this._isRendering=!1}return Z(e,[{key:"useInit",value:function(){var e=this;this._itemsToRefresh=[],this._itemsToShow=[],this._itemsToHide=[],this._isRendering=!0,n.useEffect((function(){e._isRendering=!1}))}},{key:"refreshItem",value:function(e){if(this._isRendering)this._itemsToRefresh.push(e);else{var t=e.getGrid();t.refreshItems([e]),t.layout()}}},{key:"setItemVisibility",value:function(e,t,n){if(this._isRendering)t?this._itemsToShow.push(e):this._itemsToHide.push(e);else{var r=e.getGrid();t?r.show([e],{instant:n}):r.hide([e],{instant:n})}}},{key:"getItemsToRefresh",value:function(){return this._itemsToRefresh}},{key:"getItemsToShow",value:function(){return this._itemsToShow}},{key:"getItemsToHide",value:function(){return this._itemsToHide}},{key:"destroy",value:function(){this._itemsToRefresh=[],this._itemsToShow=[],this._itemsToHide=[]}}]),e}(),de=function(){function e(){K(this,e),a(this,"_fiber",void 0),a(this,"_flag","0")}return Z(e,[{key:"useInit",value:function(e){var t=this;this.updateFlag(),n.useEffect((function(){se(null!==e.current),t._fiber=function(e){var t=Object.keys(e).find((function(e){return e.startsWith("__reactFiber")}));return se("string"==typeof t),e[t]}(e.current)}),[])}},{key:"getStateNodes",value:function(e){var t=[];if(0===e.length)return t;var n=ye(this._fiber,this._flag).child;return e.forEach((function(e){for(;n.index!==e;)n=n.sibling;t.push(function(e){var t=e.child.child;for(;!(t.stateNode instanceof HTMLElement);)t=t.child;return t.stateNode}(n))})),t}},{key:"append",value:function(e){var t=ye(this._fiber,this._flag);ge(t,e),t.alternate&&e.alternate&&ge(t.alternate,e.alternate)}},{key:"remove",value:function(e){var t=ye(this._fiber,this._flag),n=me(t,e);return t.alternate&&n.alternate&&me(t.alternate,e),n}},{key:"getFlagProp",value:function(){return a({},pe,this._flag)}},{key:"updateFlag",value:function(){"0"===this._flag?this._flag="1":this._flag="0"}},{key:"destroy",value:function(){this._fiber=null}}]),e}(),pe="muuri-react-flag";function ye(e,t){if(!e.alternate)return e;var n=e.memoizedProps[pe];if(n===e.alternate.memoizedProps[pe]){for(var r=e;r.return;)r=r.return;return r.stateNode.current===r?e:e.alternate}return n===t?e:e.alternate}function ge(e,t){var n;if(e.child){for(var r=e.child;r.sibling;)r=r.sibling;t.index=r.index+1,r.sibling=t}else e.child=t,t.index=0;t.return=e,t._debugOwner&&(t._debugOwner=null===(n=e.return)||void 0===n?void 0:n.return)}function me(e,t){var n,r,o,i=e.child;if(ve(i,t)){for(;ve(i.sibling,t);)i=i.sibling;o=(r=i).sibling,r.sibling=r.sibling.sibling,n=o,he(i)}else n=function(e){var t=e.child;return e.child=e.child.sibling,t}(e),(i=i.sibling)&&he(i);return n.sibling=null,n}function he(e){for(;e.sibling;)e.sibling.index=e.index+1,e=e.sibling}function ve(e,t){return e.child.child.key!==t}var be=function(){function e(){K(this,e),a(this,"_oldChildrenArray",[]),a(this,"_children",[]),a(this,"_indicesToAdd",[]),a(this,"_dragCounter",0)}return Z(e,[{key:"useInit",value:function(e){var t=n.Children.toArray(e);this._indicesToAdd=Ce(t,this._oldChildrenArray),this._children=e||[],this._oldChildrenArray=t}},{key:"remove",value:function(e){return this._oldChildrenArray.splice(e,1)[0]}},{key:"append",value:function(e){this._oldChildrenArray.push(e)}},{key:"getIndicesToAdd",value:function(){return this._indicesToAdd}},{key:"render",value:function(e){var t=n.Children.map(this._children,(function(t){return e(t,t.key)}));return this.flush(),t}},{key:"incrementDragCounter",value:function(){this._dragCounter+=1}},{key:"decrementDragCounter",value:function(){this._dragCounter-=1}},{key:"flush",value:function(){this._children=[]}},{key:"destroy",value:function(){this.flush()}}]),e}();function Ce(e,t){for(var n=[],r=0,o=0;o<e.length;o++){var i=Oe(t,e[o],r);-1===i?n.push(o):r=i}return n}function Oe(e,t,n){for(var r=n=n>e.length?e.length:n;r<e.length;r++)if(_e(t,e[r]))return r;for(var o=0;o<n;o++)if(_e(t,e[o]))return o;return-1}function _e(e,t){return e.key===t.key}var Se=["relative","absolute","fixed"];function we(e){return n.useRef(e).current}function Re(e){var t=n.useRef(e);if(t.current===e)return!0;var r=function(e,t){if(e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!0;return!1}(t.current,e);return t.current=e,r}function Te(e){var t=n.useRef();return t.current||(t.current=e()),t.current}function Pe(){var e=n.useState()[1];return we((function(){e(Object.create(null))}))}function Ee(e){var t=e.children,r=e.itemClasses,o=e.itemAddController,a=e.itemRemoveController,u=e.propsToData,s=e.itemKey,l=e.grid,f=Te((function(){var e=new J,t=new le;return t.set("key",s),t.set("eventController",e),{eventController:e,itemRefController:t,itemRemoveController:a,grid:l}}));if(f.itemRefController.set("props",t.props),f.itemRemoveController=a,f.grid=l,u){var d=u(t.props);se("object"===y(d),"The data returned by 'propsToData' must be an object, founded ".concat(y(d))),f.itemRefController.set("data",d)}return n.useEffect((function(){return o.requestItem((function(e){!function(e){c(e,{props:{},data:{}}),Object.defineProperty(e,"_sortData",{get:function(){return this.getData()},set:function(){}})}(e),function(e,t){e.style.position="absolute";var n=e.setAttribute.bind(e);e.setAttribute=function(r,o){if("class"===r){var i=(e.getAttribute("class")||"").split(" ").filter((function(e){return t.includes(e)}));o="".concat(o," ").concat(i.join(" "))}n(r,o)}}(e.getElement(),r),f.itemRefController.setItem(e)})),function(){var e=f.itemRefController.getItem();se(null!==e);var t=e.getElement();se(void 0!==t),e.isDragging()&&(t.style.display="none",t.style.visibility="hidden",e._drag&&e._drag.destroy(),f.grid.getElement().appendChild(t)),f.itemRefController.delete(),f.itemRemoveController.removeItem(e),f.itemRefController.destroy(),f.eventController.destroy()}}),[]),i.default.createElement(B,{value:f},t)}Ee.propTypes={itemAddController:L.object.isRequired,itemClasses:L.arrayOf(L.string.isRequired).isRequired,propsToData:L.func,children:L.element.isRequired,grid:L.instanceOf(o.default).isRequired},Ee.displayName="ItemComponent";function Ie(e){return e._settings.containerClass}var je=["itemClass","itemVisibleClass","itemHiddenClass","itemPositioningClass","itemDraggingClass","itemReleasingClass","itemPlaceholderClass"];function xe(e){return je.map((function(t){return e._settings[t]}))}function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(e,t,n){n=ke(ke({},n||{}),{},{layout:!1}),"function"==typeof t&&function(e,t,n){e.sort((function(e,n){return t(e.getData(),n.getData(),e,n)}),n)}(e,t,n),"string"==typeof t&&function(e,t,n){e.sort(t,n)}(e,t,n),Array.isArray(t)&&function(e,t,n){var r=e.getItems(),o=[],i=[];r.forEach((function(e){var n=e._component.key,r=t.findIndex((function(e){return e===n}));r>-1?o[r]=e:i.push(e)})),e.sort(Array.prototype.concat(o.filter((function(e){return!!e})),i),n)}(e,t,n)}function Ae(e){var t=e.children,r=e.gridProps,o=e.grid,a=e.filter,u=e.sort,l=e.sortOptions,d=e.addOptions,g=e.propsToData,m=e.onSend,h=e.onDragStart,v=e.onDragEnd,b=e.onFilter,C=e.onSort,O=e.onMount,_=e.onUnmount,S=e.forceSync,w=e.dragFixed,R=e.dragEnabled,T=e.instantLayout,P=Te((function(){return{gridRef:n.createRef(),gridClass:Ie(o),itemClasses:xe(o),childrenController:new be,fiberController:new de,itemAddController:new Q,itemRemoveController:new ce,layoutController:new fe,onUnmount:_,onDragStart:h,onDragEnd:v,onFilter:b,onSort:C,onSend:m}})),E={indicesToAdd:[],addedDOMItems:[],itemsToRemove:[],itemsToRefresh:[],itemsToShow:[],itemsToHide:[],hasAdded:!1,hasRemoved:!1,hasFiltered:!1,hasSorted:!1,hasRefreshed:!1,hasShown:!1,hasHidden:!1};n.useEffect((function(){return o.on("beforeSend",(function(e){var t=e.item,n=e.fromGrid,r=e.fromIndex;f(t).sentPayload||c(t,{sentPayload:{fromChildrenController:P.childrenController,fromFiberController:P.fiberController,fromGrid:n,fromIndex:r}})})).on("receive",(function(e){var t=e.item,n=e.toGrid,r=e.toIndex,i=P.childrenController,a=P.fiberController;if(t.isDragging()){c(t,{receivedPayload:{toChildrenController:i,toFiberController:a,toGrid:n,toIndex:r}})}else{var u=f(t).sentPayload;se(null!==u&&"object"===y(u));var s=u.fromChildrenController,l=u.fromFiberController;c(t,{sentPayload:null});var d=l.remove(t.getKey()),p=s.remove(d.index);a.append(d),i.append(p)}f(t).eventController.emitEvent("send",o)})).on("dragInit",(function(e,t){P.childrenController.incrementDragCounter(),f(e).eventController.emitEvent("drag",!0),P.onDragStart&&P.onDragStart(e,t)})).on("dragEnd",(function(e){var t=f(e).sentPayload,n=f(e).receivedPayload;if(t&&n){var r=t.fromChildrenController,o=t.fromFiberController,i=t.fromGrid,a=t.fromIndex,u=n.toChildrenController,s=n.toFiberController,l=n.toGrid,d=n.toIndex;if(c(e,{sentPayload:null,receivedPayload:null}),i!==l){se("function"==typeof P.onSend);var p=o.remove(e.getKey()),y=r.remove(p.index);s.append(p),u.append(y),P.onSend({key:f(e).key,fromGrid:i,fromIndex:a,fromId:f(i).id,fromGroupIds:f(i).groupIds,toGrid:l,toIndex:d,toId:f(l).id,toGroupIds:f(l).groupIds})}}})).on("dragReleaseEnd",(function(e){P.childrenController.decrementDragCounter(),f(e).eventController.emitEvent("drag",!1),P.onDragEnd&&P.onDragEnd(e)})).on("showStart",(function(e){s(e[0])&&e.forEach((function(e){var t=f(e).eventController;!0!==t.getPayload("show")&&t.emitEvent("show",!0)}))})).on("hideEnd",(function(e){e.forEach((function(e){var t=f(e).eventController;!1!==t.getPayload("show")&&t.emitEvent("show",!1)}))})).on("filter",(function(e,t){P.onFilter&&P.onFilter(e,t)})).on("sort",(function(e,t){P.onSort&&P.onSort(e,t)})),w&&o.on("dragInit",(function(e){var t=e.getElement();se(void 0!==t);var n=getComputedStyle(t),r=n.width,o=n.height,i=n.paddingTop;c(e,{dragWidth:t.style.width,dragHeight:t.style.height,dragPaddingTop:t.style.paddingTop}),t.style.width=r,t.style.height=o,t.style.paddingTop=i})).on("dragReleaseEnd",(function(e){var t=e.getElement();se(void 0!==t);var n=f(e),r=n.dragWidth,o=n.dragHeight,i=n.dragPaddingTop;t.style.width=r,t.style.height=o,t.style.paddingTop=i})),se(null!==P.gridRef.current),o._element=P.gridRef.current,function(e,t){var n=getComputedStyle(e).position;Se.includes(n)||(e.style.position=Se[0]),e.classList.add(t);var r=e.setAttribute.bind(e);e.setAttribute=function(n,o){"class"===n&&((e.getAttribute("class")||"").split(" ").includes(t)||(o="".concat(o," ").concat(t)));r(n,o)}}(P.gridRef.current,P.gridClass),function(e){var t=document.createElement("div");t.style.visibility="hidden",t.style.position="absolute",t.classList.add("grid-sizer"),c(e,{sizerElement:t});var n=e.getElement();0===n.children.length?n.appendChild(t):n.insertBefore(t,n.children[0])}(o),O&&O(o),function(){P.childrenController.destroy(),P.fiberController.destroy(),P.itemRemoveController.destroy(),P.itemAddController.destroy(),P.layoutController.destroy()}}),[]),P.childrenController.useInit(t),P.fiberController.useInit(P.gridRef),P.itemRemoveController.useInit(),P.itemAddController.useInit(),P.layoutController.useInit();var I=Re([a]),j=Re([u,l]);n.useEffect((function(){c(o,{dragEnabled:R}),E.indicesToAdd=P.childrenController.getIndicesToAdd(),E.addedDOMItems=P.fiberController.getStateNodes(E.indicesToAdd),E.itemsToRemove=P.itemRemoveController.getItemsToRemove(),E.itemsToRefresh=P.layoutController.getItemsToRefresh(),E.itemsToShow=P.layoutController.getItemsToShow(),E.itemsToHide=P.layoutController.getItemsToHide(),P.onUnmount=_,P.onDragStart=h,P.onDragEnd=v,P.onFilter=b,P.onSort=C,P.onSend=m})),n.useEffect((function(){if(E.itemsToRemove.length&&(!function(e,t){e.remove(t,{layout:!1,removeElements:!1})}(o,E.itemsToRemove),E.hasRemoved=!0),E.indicesToAdd.length){!function(e,t,n,r,o){for(var i=0;i<t.length;i++)e.add(t[i],{index:n[i],layout:!1});!o&&null!=r&&r.show&&e.show(e.getItems(n),{layout:!1})}(o,E.addedDOMItems,E.indicesToAdd,d,a);var e=o.getItems(E.indicesToAdd);P.itemAddController.emit(e),E.hasAdded=!0}a&&(I||E.hasAdded||S)&&(!function(e,t){e.filter((function(e){return t(e.getData(),e)}),{layout:!1})}(o,a),E.hasFiltered=!0),u&&(j||E.hasAdded||S)&&(Me(o,u,l),E.hasSorted=!0),!a&&E.itemsToShow.length&&(!function(e,t){e.show(t,{layout:!1})}(o,E.itemsToShow),E.hasShown=!0),!a&&E.itemsToHide.length&&(!function(e,t){e.hide(t,{layout:!1})}(o,E.itemsToHide),E.hasHidden=!0),E.itemsToRefresh.length&&(o.refreshItems(E.itemsToRefresh),E.hasRefreshed=!0),(E.hasAdded||E.hasRemoved||E.hasSorted||E.hasFiltered||E.hasRefreshed||E.hasShown||E.hasHidden)&&o.layout(T)}));var x=Te((function(){return{layoutController:P.layoutController,grid:o}}));return i.default.createElement(N,{value:x},i.default.createElement("div",p({},r,{ref:P.gridRef},P.fiberController.getFlagProp()),P.childrenController.render((function(e,t){return i.default.createElement(Ee,{key:t,itemKey:t,grid:o,propsToData:g,itemClasses:P.itemClasses,itemAddController:P.itemAddController,itemRemoveController:P.itemRemoveController},e)}))))}function Fe(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}Ae.propTypes={grid:L.object.isRequired,gridProps:L.object,filter:L.oneOfType([L.string,L.func]),sort:L.oneOfType([L.string,L.func,L.arrayOf(L.string)]),sortOptions:L.exact({descending:L.bool}),addOptions:L.exact({show:L.bool}),onSend:L.func,onDragStart:L.func,onDragEnd:L.func,onFilter:L.func,onSort:L.func,onMount:L.func,onUnmount:L.func,forceSync:L.bool,dragFixed:L.bool,dragEnabled:L.bool,instantLayout:L.bool},Ae.defaultProps={gridProps:{},addOptions:{show:!0},sortOptions:{descending:!1},forceSync:!1,dragFixed:!1,dragEnabled:!1,instantLayout:!1},Ae.displayName="GridComponent";var Ge=function(){function e(){K(this,e),a(this,"_idMap",new Map),a(this,"_groupMap",new Map)}return Z(e,[{key:"get",value:function(e){return this._idMap.get(e)||null}},{key:"getGroup",value:function(e){var t=this._groupMap.get(e);if(t)return t;var n=[];return this._groupMap.set(e,n),n}},{key:"getAll",value:function(){return Array.from(this._idMap.values())}},{key:"set",value:function(e,t){return this._idMap.set(t,e),this}},{key:"setGroup",value:function(e,t){var n=this._groupMap.get(t);return n?n.push(e):this._groupMap.set(t,[e]),this}},{key:"delete",value:function(e){return this._idMap.delete(e),this}},{key:"deleteGroup",value:function(e,t){var n=this._groupMap.get(t);if(n){var r=n.indexOf(e);r>-1&&n.splice(r,1)}return this}},{key:"clear",value:function(){return this._idMap.clear(),this._groupMap.clear(),this}}]),e}(),He=new Ge;function $e(e,t){e&&("function"==typeof e?e(t):"current"in e&&(e.current=t))}function qe(e){return e instanceof HTMLElement||e instanceof window.constructor}function Le(e){var t=function(e){return"function"==typeof e?e:function(t,n){return o.default.ItemDrag.defaultStartPredicate(t,n,e)}}(e.dragStartPredicate);e.dragStartPredicate=function(e,n){return!!f(e.getGrid()).dragEnabled&&((!s(e)||!1!==f(e).draggable)&&t(e,n))}}var ze=["children","id","groupIds","gridProps","filter","sort","sortOptions","addOptions","propsToData","onSend","onDragStart","onDragEnd","onFilter","onSort","onMount","onUnmount","forceSync","dragFixed","dragEnabled","instantLayout"];function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ue=n.forwardRef((function(e,t){var r,a,u,s=e.children,l=e.id,f=e.groupIds,p=e.gridProps,g=e.filter,m=e.sort,h=e.sortOptions,v=e.addOptions,b=e.propsToData,C=e.onSend,O=e.onDragStart,_=e.onDragEnd,S=e.onFilter,w=e.onSort,R=e.onMount,T=e.onUnmount,P=e.forceSync,E=e.dragFixed,I=e.dragEnabled,j=e.instantLayout,x=Fe(e,ze),D=Te((function(){x.items=[],x.dragEnabled=null!==I,function(e){var t=e.dragContainer,n={current:null};Object.defineProperty(e,"dragContainer",{get:function(){return n.current},set:function(e){!e||e instanceof Element?n.current=e:n=e}}),e.dragContainer=t}(x),function(e,t){var n=e.dragSort;if(n&&"object"===y(n)){se("string"==typeof n.groupId);var r=t.getGroup(n.groupId);e.dragSort=function(){return r}}}(x,He),function(e){var t=e.dragAutoScroll;t&&Array.isArray(t.targets)&&t.targets.forEach((function(e){if(!qe(e)){se("element"in e);var t=e.element,n={current:null};Object.defineProperty(e,"element",{get:function(){return n.current},set:function(e){qe(e)?n.current=e:n=e}}),e.element=t}}))}(x),Le(x);var e=function(e){var t=document.createElement("div");t.style.display="none",document.body.appendChild(t);var n=new o.default(t,e);return document.body.removeChild(t),n}(x);return l&&He.set(e,l),c(e,{id:l}),$e(t,e),e}));return n.useEffect((function(){return function(){$e(t,null),d(D),l&&He.delete(l),D.destroy()}}),[]),r=function(){return c(D,{groupIds:f}),f&&f.forEach((function(e){He.setGroup(D,e)})),function(){f&&f.forEach((function(e){He.deleteGroup(D,e)}))}},a=Re(f||[]),u=n.useRef(),a&&(u.current&&u.current(),u.current=r()),n.useEffect((function(){return function(){u.current&&u.current()}}),[]),i.default.createElement(Ae,{grid:D,gridProps:p,filter:g,sort:m,sortOptions:h,addOptions:v,propsToData:b,onSend:C,onDragStart:O,onDragEnd:_,onFilter:S,onSort:w,onMount:R,onUnmount:T,forceSync:P,dragFixed:E,dragEnabled:I,instantLayout:j},s)}));function Be(e,t){var n=W().itemRefController;se(void 0!==n);var r=we((function(e,t){if(se("object"===y(e),"The data must be an object, founded: ".concat(y(e))),(t=t||Be.defaultOptions).merge){var r=n.get("data")||{};n.set("data",Object.assign(r,e))}else n.set("data",e)}));return"object"===y(e)&&r(e,t),r}function We(){var e=W().eventController,t=Pe();return se(void 0!==e),n.useEffect((function(){e.enableEvent("drag",t)}),[e,t]),e.getPayload("drag")||!1}function Ke(){var e=W().itemRefController;return se(void 0!==e),we((function(t){e.set("draggable",!!t)}))}function Ye(){var e=W().eventController,t=V(),r=Pe();se(void 0!==e&&void 0!==t.grid);var o=e.getPayload("send")||t.grid;return n.useEffect((function(){e.enableEvent("send",r)}),[e,r]),{id:o._component.id,groupIds:o._component.groupIds,grid:o}}function Ze(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=V(),r=t.layoutController,o=W(),i=o.itemRefController;se(void 0!==i&&void 0!==r);var a=n.useCallback((function(){if(i.hasItem()){var e=i.getItem();r.refreshItem(e)}}),[r,i]);return n.useEffect((function(){a()}),e.concat(a)),a}function Je(){var e=W().eventController,t=Pe();return se(void 0!==e),n.useEffect((function(){e.enableEvent("show",t)}),[e,t]),e.getPayload("show")}function Qe(){var e=V().layoutController,t=W(),n=t.eventController,r=t.itemRefController;return se(void 0!==r&&void 0!==e&&void 0!==n),we((function(t,o){r.hasItem()&&!!t!==n.getPayload("show")&&(o=o||Qe.defaultOptions,e.setItemVisibility(r.getItem(),t,!0===o.instant))}))}Ue.propTypes={id:L.string,groupIds:L.arrayOf(L.string.isRequired),showDuration:L.number,showEasing:L.string,hideDuration:L.number,hideEasing:L.string,visibleStyles:L.shape({}),hiddenStyles:L.shape({}),layout:L.oneOfType([L.func,L.exact({fillGaps:L.bool,horizontal:L.bool,alignRight:L.bool,alignBottom:L.bool,rounding:L.bool})]),layoutOnResize:L.oneOfType([L.bool,L.number]),layoutDuration:L.number,layoutEasing:L.string,dragContainer:L.oneOfType([L.instanceOf(HTMLElement),L.shape({current:L.instanceOf(HTMLElement).isRequired})]),dragStartPredicate:L.oneOfType([L.func,L.exact({distance:L.number,delay:L.number,handle:L.oneOfType([L.string,L.bool])})]),dragAxis:L.oneOf(["x","y","xy"]),dragSort:L.oneOfType([L.bool,L.func,L.exact({groupId:L.string.isRequired})]),dragSortHeuristics:L.exact({sortInterval:L.number,minDragDistance:L.number,minBounceBackAngle:L.number}),dragSortPredicate:L.oneOfType([L.func,L.exact({action:L.oneOf(["move","swap"]),migrateAction:L.oneOf(["move","swap"]),threshold:L.number})]),dragRelease:L.exact({duration:L.number,easing:L.string,useDragContainer:L.bool}),dragCssProps:L.exact({touchAction:L.string,userSelect:L.string,userDrag:L.string,tapHighlightColor:L.string,touchCallout:L.string,contentZooming:L.string}),dragPlaceholder:L.exact({enabled:L.bool,createElement:L.func,onCreate:L.func,onRemove:L.func,easing:L.string,duration:L.number}),containerClass:L.string,itemClass:L.string,itemVisibleClass:L.string,itemHiddenClass:L.string,itemPositioningClass:L.string,itemDraggingClass:L.string,itemReleasingClass:L.string,itemPlaceholderClass:L.string},Ue.defaultProps=Ve(Ve({},o.default.defaultOptions),{},{dragEnabled:null}),Ue.displayName="MuuriComponent",Be.defaultOptions={merge:!1},Qe.defaultOptions={instant:!1};var Xe=Object.freeze({__proto__:null,useData:Be,useDrag:We,useDraggable:Ke,useGrid:Ye,useRefresh:Ze,useShow:Je,useVisibility:Qe});function et(e){se("object"===y(e)),se("number"==typeof e.columns&&e.columns>0&&e.columns<=1),se("number"==typeof e.ratio||"number"==typeof e.height||"string"==typeof e.height),se("number"!=typeof e.ratio||"number"!=typeof e.height&&"string"!=typeof e.height);var t,n=function(e){"number"==typeof e&&(e="".concat(e,"px"));var t=e.trim().split(" "),n="0px",r="0px",o=0,i=0;1===t.length?n=r=t[0]:2===t.length||3===t.length?n=r=t[1]:4===t.length&&(n=t[3],r=t[1]);-1===n.indexOf("%")?i+=parseFloat(n):o+=parseFloat(n);-1===r.indexOf("%")?i+=parseFloat(r):o+=parseFloat(r);return{margin:e,mStatic:i,mDynamic:o}}(e.margin||"0px"),r=n.margin,o=n.mStatic,i=n.mDynamic,a=function(e,t,n){var r=0!==t,o=100*e-n,i=r?"".concat(o,"% - ").concat(t,"px"):"".concat(o,"%");return{needCalc:r,width:i}}(e.columns,o,i),u=a.needCalc,s=a.width;return e.ratio?{width:u?"calc(".concat(s,")"):s,paddingTop:tt(s,e.ratio,u),height:"0px",borderWidth:"0px",margin:r}:{width:u?"calc(".concat(s,")"):s,paddingTop:"0px",height:(t=e.height,"number"==typeof t?"".concat(t,"px"):t),borderWidth:"0px",margin:r}}function tt(e,t,n){return n?"calc((".concat(e,") / ").concat(t,")"):"".concat(parseFloat(e)/t,"%")}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rt(e,t){if(e){if("string"==typeof e)return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nt(e,t):void 0}}function ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||rt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e){return function(e){if(Array.isArray(e))return nt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var at=["useData","useDrag","useDraggable","useGrid","useRefresh","useShow","useVisibility"],ut=[["useData",st("setData")],["useDrag",st("isDragging")],["useDraggable",st("setDraggable")],["useGrid",st("gridData")],["useRefresh",st("refresh")],["useShow",st("isShowing")],["useVisibility",st("setVisibility")]];function st(e){return function(t){return a({},e,t)}}var lt=o.default.AutoScroller,ct=o.default.ItemDrag;e.AutoScroller=lt,e.ChildrenController=be,e.EventController=J,e.FiberController=de,e.FlagProp=pe,e.GridComponent=Ae,e.GridContext=z,e.GridProvider=N,e.ItemAddController=Q,e.ItemComponent=Ee,e.ItemContext=U,e.ItemDrag=ct,e.ItemProvider=B,e.ItemRefController=le,e.ItemRemoveController=ce,e.LayoutController=fe,e.MuuriComponent=Ue,e.MuuriMap=Ge,e.getHandler=st,e.getIndicesToAdd=Ce,e.getResponsiveStyle=et,e.getStaticStyle=function(e){var t=et(e);se("grid"in e);var n=e.grid.getSizerElement();Object.assign(n.style,t);var r=window.getComputedStyle(n);return{width:r.width,height:r.height,paddingTop:r.paddingTop,margin:r.margin}},e.muuriMap=He,e.useData=Be,e.useDrag=We,e.useDraggable=Ke,e.useGrid=Ye,e.useGridContext=V,e.useItemContext=W,e.useRefresh=Ze,e.useShow=Je,e.useVisibility=Qe,e.withHooks=function(e,t){se(Array.isArray(t)),t.forEach((function(e){se(at.includes(e))})),se(0!==t.length);var n=ut.filter((function(e){var n=ot(e,1)[0];return t.includes(n)}));return function(t){return i.default.createElement(e,p({},t,function(e){return Object.assign.apply(Object,[{}].concat(it(e.map((function(e){var t=ot(e,2),n=t[0];return(0,t[1])(Xe[n]())})))))}(n)))}},Object.defineProperty(e,"__esModule",{value:!0})}));
